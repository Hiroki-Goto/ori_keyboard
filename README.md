# ori_keyboard
自作キーボードのファームウェアを自作するためのリポジトリ

## 必要な機能
- キーマトリックスの読み込み  
- OLEDまたはLCDに現在のレイヤー、numlockなどを表示
- LEDの制御（余力があれば）
- 一部マウス実装  
    - マウススクロール
    - 右クリック、左クリック  

マウスホイールに関してはトラックボールをUSB接続で追加
（USBハブをキーボードに乗せる）

## 行数を変更する場合
master/とslave/にあるparam.hの
MASTER_COL_NUM、SLAVE_COL_NUM
を変更する

## レイヤー機能について
現状はレイヤーの値を0xF0以上にすることで対応している  
押している間のみレイヤーを変える機能は実装していない
- レイヤーを追加する場合  
    1. master/param.hにレイヤー、キーマップを追加
    2. master/key.cppにあるchangeLayer関数にcase文を追加
    3. masetr/OLED.cppにあるdisplay関数にcase文を追加（OLEDに表示する場合のみ）

## シリアル通信で送信するメッセージの規格
### ・キーボード  
１ビット目：キーボードまたは、マウスか？(キーボードの場合０)  
２ビット目：押されたまたは、離されているか？（押されている場合１）  
それ以降：キーマトリックス  
キーマトリックスに関してはcol_num * SLAVE_ROW_NUM + row_numの値を代入している

### ・マウス
今のところ３バイトの予定  
1バイト目：x軸  
2バイト目：y時  
3バイト目：ホイール  

### LEDの色
これに関しては今のところ未定
